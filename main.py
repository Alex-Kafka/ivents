import telebot
from telebot import types

bot = telebot.TeleBot('7643201067:AAHdQobwX5yNGFAQ-f9zULGFD9rq3Pr9jfQ')

admin_username = 'sellandprey'  # –£–∫–∞–∂–∏—Ç–µ —é–∑–µ—Ä–Ω–µ–π–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

user_interests = {}
events = {
    '–ê–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Ä—Ç': [
        {'photo': 'sport1.jpg', 'text': '–ü–æ–∫–æ—Ä–µ–Ω–∏–µ –≤–µ—Ä—à–∏–Ω \n\n–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–π –∫–æ–º–∞–Ω–¥–µ –Ω–∞ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â—É—é —ç–∫—Å–ø–µ–¥–∏—Ü–∏—é –ø–æ –∑–∞—Å–Ω–µ–∂–µ–Ω–Ω—ã–º –≤–µ—Ä—à–∏–Ω–∞–º. –≠—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø—ã—Ç–∞—Ç—å —Å–µ–±—è –∏ –Ω–∞—Å–ª–∞–¥–∏—Ç—å—Å—è –≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω—ã–º–∏ –≤–∏–¥–∞–º–∏, –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –æ–±—ã—á–Ω—ã–º —Ç—É—Ä–∏—Å—Ç–∞–º. –í—Å—Ç—Ä–µ—á–∏ —É –∫–æ—Å—Ç—Ä–∞ –∏ –∏—Å—Ç–æ—Ä–∏–∏ –æ –≤–µ–ª–∏–∫–∏—Ö –ø–æ–∫–æ—Ä–∏—Ç–µ–ª—è—Ö –≥–æ—Ä —Å–æ–∑–¥–∞–¥—É—Ç –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è –∏ –¥—Ä—É–∂–±—ã!', 'url': 'https://google.com'},
        {'photo': 'sport2.jpg', 'text': '–í–µ–ª–æ–ø—Ä–æ–±–µ–≥ –ø–æ –∂–∏–≤–æ–ø–∏—Å–Ω—ã–º –º–µ—Å—Ç–∞–º \n\n–ò—Å–ø—ã—Ç–∞–π —Å–≤–æ–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω–∞ –≤–µ–ª–æ–ø—Ä–æ–≥—É–ª–∫–µ, –∫–æ—Ç–æ—Ä–∞—è –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≥–æ—Ä–Ω—ã–µ —Ç—Ä–æ–ø—ã –∏ –∂–∏–≤–æ–ø–∏—Å–Ω—ã–µ –¥–æ–ª–∏–Ω—ã. –ù–∞—Å–ª–∞–¥–∏—Å—å —Å–≤–µ–∂–∏–º –≤–æ–∑–¥—É—Ö–æ–º –∏ –µ–¥–∏–Ω–µ–Ω–∏–µ–º —Å –ø—Ä–∏—Ä–æ–¥–æ–π. –°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –æ–ø—ã—Ç–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–µ —ç–º–æ—Ü–∏–∏!', 'url': 'https://google.com'}
    ],
    '–ò—Å–∫—É—Å—Å—Ç–≤–æ': [
        {'photo': 'art1.jpg', 'text': '–ò—Å–∫—É—Å—Å—Ç–≤–æ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è \n\n–ü–æ–≥—Ä—É–∑–∏—Ç–µ—Å—å –≤ –º–∏—Ä –∂–∏–≤–æ–ø–∏—Å–∏ –Ω–∞ –Ω–∞—à–µ–º –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å–µ! –ü–æ–¥ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º –∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Ö—É–¥–æ–∂–Ω–∏–∫–∞ –≤—ã —É–∑–Ω–∞–µ—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã —Ç–µ—Ö–Ω–∏–∫–∏ –∞–∫–≤–∞—Ä–µ–ª–∏ –∏ –º–∞—Å–ª–∞. –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ–±—É—á–µ–Ω–∏–µ, –∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã—Ä–∞–∑–∏—Ç—å —Å–≤–æ–∏ —á—É–≤—Å—Ç–≤–∞ –∏ –æ—Ç–∫—Ä—ã—Ç—å –≤ —Å–µ–±–µ –Ω–æ–≤—ã—Ö –≤–∑–≥–ª—è–¥–æ–≤ –Ω–∞ –∏—Å–∫—É—Å—Å—Ç–≤–æ!', 'url': 'https://google.com'},
        {'photo': 'art2.jpg', 'text': '–û–∂–∏–≤–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∏ \n\n–ü—Ä–∏–≥–ª–∞—à–∞–µ–º –≤–∞—Å –Ω–∞ –≤—ã—Å—Ç–∞–≤–∫—É —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–∫—É–ª—å–ø—Ç—É—Ä, –≥–¥–µ –≤–∞—Å –∂–¥–µ—Ç –≤—Å—Ç—Ä–µ—á–∞ —Å –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–º–∏ –∏ —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–º–∏ –ø–æ–¥—Ö–æ–¥–∞–º–∏ –∫ –∏—Å–∫—É—Å—Å—Ç–≤—É. –ü–æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è–º–∏ –ø—Ä–∏–∑–Ω–∞–Ω–Ω—ã—Ö –æ—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏ –∑–∞—Ä—É–±–µ–∂–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–æ–≤, –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–º–∏ —Å–≤–æ–µ–π –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é –∏ –∑–Ω–∞—á–∏–º–æ—Å—Ç—å—é.', 'url': 'https://google.com'}
    ],
    '–ù–æ—á–Ω—ã–µ —Ç—É—Å–æ–≤–∫–∏': [
        {'photo': 'party1.jpg', 'text': '–í —Ä–∏—Ç–º–µ –Ω–æ—á–∏ \n\n–ü–æ–≥—Ä—É–∑–∏—Ç–µ—Å—å –≤ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É —ç–Ω–µ—Ä–≥–∏—á–Ω–æ–≥–æ –∫–ª—É–±–Ω–æ–≥–æ –≤–µ—á–µ—Ä–∞! –ó–∞–∂–∏–≥–∞—Ç–µ–ª—å–Ω–∞—è –º—É–∑—ã–∫–∞ –æ—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã—Ö DJ, —Å–≤–µ—Ç–æ–≤–∞—è —à–æ—É-–ø—Ä–æ–≥—Ä–∞–º–º–∞ –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—é—Ä–ø—Ä–∏–∑–æ–≤ –∂–¥—É—Ç –≤–∞—Å. –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å —Ç–∞–Ω—Ü–µ–º –¥–æ —É—Ç—Ä–∞ –≤ –∫–æ–º–ø–∞–Ω–∏–∏ –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤ –∏ –Ω–æ–≤—ã—Ö –¥—Ä—É–∑–µ–π!', 'url': 'https://google.com'},
        {'photo': 'party2.jpg', 'text': '–ü–æ–¥ –∑–≤–µ–∑–¥–Ω—ã–º –Ω–µ–±–æ–º \n\n–ü—Ä–æ–≤–µ–¥–∏—Ç–µ –Ω–æ—á—å —É –º–æ—Ä—è, –Ω–∞—Å–ª–∞–∂–¥–∞—è—Å—å –∂–∏–≤–æ–π –º—É–∑—ã–∫–æ–π –∏ –±–∞—Ä–±–µ–∫—é –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–æ–∑–¥—É—Ö–µ. –£—é—Ç–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞—Å—Å–ª–∞–±–∏—Ç—å—Å—è, —Å–ø–µ—Ç—å –ø–µ—Å–Ω–∏ —É –∫–æ—Å—Ç—Ä–∞ –∏ –∑–∞–±—ã—Ç—å –æ –≥–æ—Ä–æ–¥—Å–∫–æ–π —Å—É–µ—Ç–µ. –ò–¥–µ–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –≤—Å—Ç—Ä–µ—á –∏ –¥—É—à–µ–≤–Ω—ã—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤!', 'url': 'https://google.com'}
    ],
    '–ë–∏–∑–Ω–µ—Å-–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ': [
        {'photo': 'ed1.jpg', 'text': '–ó–∞—Ö–≤–∞—Ç–∏—Ç–µ –æ–Ω–ª–∞–π–Ω-–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ \n\n–£–∑–Ω–∞–π—Ç–µ, –∫–∞–∫ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–æ–¥–≤–∏–≥–∞—Ç—å –≤–∞—à –±–∏–∑–Ω–µ—Å –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ! –í–µ–¥—É—â–∏–µ —ç–∫—Å–ø–µ—Ä—Ç—ã —Ä–∞—Å—Å–∫–∞–∂—É—Ç –æ —Ç—Ä–µ–Ω–¥–∞—Ö –∏ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ö –≤ –æ–±–ª–∞—Å—Ç–∏ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞. –ü–æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å —É—Å–ø–µ—à–Ω—ã–º–∏ –∫–µ–π—Å–∞–º–∏ –∏ –ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –≤–∞–º –ø–æ–¥–Ω—è—Ç—å—Å—è –Ω–∞ –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å!', 'url': 'https://google.com'},
        {'photo': 'ed2.jpg', 'text': '–ò–Ω–≤–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ —Å–µ–±—è \n\n–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –ø—Ä–æ–≥—Ä–∞–º–º–µ –±–∏–∑–Ω–µ—Å-–∫–æ—É—á–∏–Ω–≥–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑–≤–∏—Ç—å –ª–∏–¥–µ—Ä—Å–∫–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —É–ª—É—á—à–∏—Ç—å –ª–∏—á–Ω—É—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å. –í–∞—Å –∂–¥—É—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç—Ä–µ–Ω–∏–Ω–≥–∏, –≥—Ä—É–ø–ø–æ–≤—ã–µ –æ–±—Å—É–∂–¥–µ–Ω–∏—è –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∞–º–∏. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤–æ–∏–º –∂–∏–∑–Ω–µ–Ω–Ω—ã–º –∫—É—Ä—Å–æ–º!', 'url': 'https://google.com'}
    ]
}


@bot.message_handler(commands=['start'])
def start(message):
    interests = ['–ê–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Ä—Ç', '–ò—Å–∫—É—Å—Å—Ç–≤–æ', '–ù–æ—á–Ω—ã–µ —Ç—É—Å–æ–≤–∫–∏', '–ë–∏–∑–Ω–µ—Å-–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ']
    markup = types.InlineKeyboardMarkup(row_width=2)
    buttons = [types.InlineKeyboardButton(text=interest, callback_data=interest) for interest in interests]
    markup.add(*buttons)
    markup.add(types.InlineKeyboardButton(text="–ì–æ—Ç–æ–≤–æ", callback_data="–ì–æ—Ç–æ–≤–æ"))
    bot.send_photo(message.chat.id, open('welcome.jpg', 'rb'))
    bot.send_message(message.chat.id, f'–ü—Ä–∏–≤–µ—Ç üëã'
                                      f'\n\n–ú—ã —Ä–∞–¥—ã –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ç–µ–±–µ —É–Ω–∏–∫–∞–ª—å–Ω—É—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–æ–±—Ä–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, \n–∫–æ—Ç–æ—Ä—ã–µ –∏–¥–µ–∞–ª—å–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç–≤–æ–∏–º –∏–Ω—Ç–µ—Ä–µ—Å–∞–º! üéâ \n–ü—Ä–æ—Å—Ç–æ –≤—ã–±–µ—Ä–∏ –∏–∑ –Ω–∞—à–µ–≥–æ —Å–ø–∏—Å–∫–∞ —Ç–µ —Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–±—è –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—Ç, –∏ –º—ã –ø–æ–¥–±–µ—Ä–µ–º –¥–ª—è —Ç–µ–±—è —Å–∞–º—ã–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–µ —Å–æ–±—ã—Ç–∏—èüìù'
                                      f'\n\n–ù–µ —É–ø—É—Å—Ç–∏ —à–∞–Ω—Å –æ—Ç–∫—Ä—ã—Ç—å –¥–ª—è —Å–µ–±—è —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ! \n–ö–∞–∫ —Ç–æ–ª—å–∫–æ –∑–∞–∫–æ–Ω—á–∏—à—å –≤—ã–±–æ—Ä, –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ì–æ—Ç–æ–≤–æ", –∏ –º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º –¥–ª—è —Ç–µ–±—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π üòâ \n\n–î–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º —Ç–≤–æ–∏ –≤—ã—Ö–æ–¥–Ω—ã–µ –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–º–∏!üåü', reply_markup=markup)
    user_interests[message.chat.id] = []
@bot.callback_query_handler(func=lambda call: call.data in events.keys() or call.data == "–ì–æ—Ç–æ–≤–æ")
def handle_interests(call):
    chat_id = call.message.chat.id
    if call.data == '–ì–æ—Ç–æ–≤–æ':
        selected_interests = user_interests.get(chat_id, [])

        if not selected_interests:
            bot.send_message(chat_id, "–í—ã –Ω–µ –≤—ã–±—Ä–∞–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞.")
            return

        for interest in selected_interests:
            interest_events = events.get(interest, [])
            for event in interest_events:
                markup = types.InlineKeyboardMarkup(row_width=2)
                back_button = types.InlineKeyboardButton(text="–ù–∞–∑–∞–¥", callback_data="–ù–∞–∑–∞–¥")
                url_button = types.InlineKeyboardButton(text="–ü–µ—Ä–µ–π—Ç–∏", url=event['url'])
                markup.add(back_button, url_button)

                bot.send_photo(chat_id, open(event['photo'], 'rb'), caption=event['text'], reply_markup=markup)
    else:
        user_interests[chat_id].append(call.data)
        bot.answer_callback_query(call.id, f"–î–æ–±–∞–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä–µ—Å: {call.data}")


@bot.callback_query_handler(func=lambda call: call.data == "–ù–∞–∑–∞–¥")
def go_back(call):
    start(call.message)


@bot.message_handler(commands=['add_event'])
def add_event(message):
    if message.from_user.username == admin_username:
        params = message.text.split(';')
        if len(params) != 4:
            bot.send_message(message.chat.id,
                             "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç: /add_event;–ö–∞—Ç–µ–≥–æ—Ä–∏—è;–§–æ—Ç–æ;–û–ø–∏—Å–∞–Ω–∏–µ")
            return

        _, category, photo, description = params
        if category not in events:
            bot.send_message(message.chat.id,
                             "–£–∫–∞–∑–∞–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: " + ', '.join(events.keys()))
            return

        events[category].append({'photo': photo.strip(), 'text': description.strip()})
        bot.send_message(message.chat.id,
                         f"–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ '{description.strip()}' –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é '{category.strip()}'.")
    else:
        bot.send_message(message.chat.id, "–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π.")


bot.polling(non_stop=True)

#[eq
